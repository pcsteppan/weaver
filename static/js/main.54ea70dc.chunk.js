(this.webpackJsonpweaver=this.webpackJsonpweaver||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a(3),s=a.n(i),l=a(8),o=a.n(l),h=(a(15),a(1)),c=a(2),d=a(6),u=a(5),x=a(4),p=a(9),g=(a(16),function(e){Object(u.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(e){this.props.toggle(e)}},{key:"render",value:function(){return Object(r.jsx)("td",{className:"toggleCell ".concat(this.props.isActive?"active":""),onClick:this.handleClick,"data-row":this.props.row,"data-col":this.props.col})}}]),a}(s.a.Component)),b=function(e){Object(u.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleToggle=n.handleToggle.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"handleToggle",value:function(e){this.props.handleToggle(e,this.props.name)}},{key:"constructTable",value:function(e){var t=this;return e.map((function(e,a){return[e.map((function(e,n){return Object(r.jsx)(g,{row:a,col:n,toggle:t.handleToggle,isActive:e},"".concat(n,"_").concat(a))}))]}))}},{key:"render",value:function(){return Object(r.jsx)("table",{children:Object(r.jsx)("tbody",{children:this.constructTable(this.props.data).map((function(e,t){return Object(r.jsx)("tr",{children:e},t)}))})})}}]),a}(s.a.Component),f=(a(17),function(e){Object(u.a)(a,e);var t=Object(x.a)(a);function a(e){return Object(h.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return Object(r.jsx)("td",{className:"cell","data-row":this.props.row,"data-col":this.props.col,style:this.props.style})}}]),a}(s.a.Component)),m=function(e){Object(u.a)(a,e);var t=Object(x.a)(a);function a(e){return Object(h.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"constructTable",value:function(e){return e.map((function(e,t){return[e.map((function(e,a){return Object(r.jsx)(f,{row:t,col:a,style:e},"".concat(a,"_").concat(t))}))]}))}},{key:"render",value:function(){return Object(r.jsx)("table",{children:Object(r.jsx)("tbody",{children:this.constructTable(this.props.data).map((function(e,t){return Object(r.jsx)("tr",{children:e},t)}))})})}}]),a}(s.a.Component);!function(e){e.Warp="WARP",e.Weft="WEFT"}(n||(n={}));var j=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{default:""};Object(h.a)(this,e),this.type=void 0,this.representation=void 0,this.type=t,this.representation=a,"default"in a&&("WARP"===this.type?this.representation={backgroundColor:"#bb8"}:this.representation={backgroundColor:"#229"})},v=function(){function e(){Object(h.a)(this,e),this.threads=void 0,this.threads=new Set}return Object(c.a)(e,[{key:"attachThread",value:function(e){this.threads.add(e)}},{key:"unattachThread",value:function(e){this.threads.delete(e)}}]),e}(),T=function(){function e(t){Object(h.a)(this,e),this.harnesses=void 0,this.id=void 0,this.id=t,this.harnesses=new Set}return Object(c.a)(e,[{key:"attachHarness",value:function(e){this.harnesses.add(e)}},{key:"unattachHarness",value:function(e){this.harnesses.delete(e)}},{key:"getAttachedHarnesses",value:function(){return Array.from(this.harnesses)}}]),e}(),O=function(){function e(t){Object(h.a)(this,e),this.dimensions=void 0,this.warpThreads=void 0,this.weftThreads=void 0,this.harnesses=void 0,this.treadles=void 0,this.treadlingInstructions=void 0,this.dimensions=t,this.warpThreads=new Array(t.warp).fill(null).map((function(){return new j(n.Warp)})),this.weftThreads=new Array(t.weft).fill(null).map((function(){return new j(n.Weft)})),this.harnesses=new Array(t.harnesses).fill(null).map((function(){return new v})),this.treadles=new Array(t.treadles).fill(null).map((function(e,t){return new T(t)})),this.treadlingInstructions=new Array(t.weft).fill(null)}return Object(c.a)(e,[{key:"getTopThreadAt",value:function(e,t){var a=this.treadlingInstructions[t];if(a instanceof T){var n=this.warpThreads[e];return a.getAttachedHarnesses().some((function(e){return e.threads.has(n)}))?n:this.weftThreads[t]}return this.weftThreads[t]}},{key:"setTreadlingInstruction",value:function(e,t){this.treadlingInstructions[e]===this.treadles[t]?this.treadlingInstructions[e]=null:this.treadlingInstructions[e]=this.treadles[t]}}]),e}(),w=(a(18),function(e){Object(u.a)(a,e);var t=Object(x.a)(a);function a(e){var n;Object(h.a)(this,a);return(n=t.call(this,e)).state={weftCount:50,warpCount:50,harnessCount:4,treadleCount:4,threadingTableData:n.arrayFiller(4,50,!1),tieupTableData:n.arrayFiller(4,4,!1),weavingTableData:n.arrayFiller(50,50,{backgroundColor:"#00f"}),treadlingTableData:n.arrayFiller(50,4,!1)},n.loom=new O({warp:50,weft:50,harnesses:4,treadles:4}),n.handleToggle=n.handleToggle.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"arrayFiller",value:function(e,t,a){return new Array(e).fill([]).map((function(){return new Array(t).fill(a)}))}}]),Object(c.a)(a,[{key:"handleToggle",value:function(e,t){var a=t+"Data",n=parseInt(e.target.dataset.row),r=parseInt(e.target.dataset.col);if("threadingTable"===t){var i=this.loom.harnesses[n],s=this.loom.warpThreads[r];i.threads.has(s)?i.unattachThread(s):i.attachThread(s)}else if("tieupTable"===t){var l=this.loom.dimensions.harnesses-(n+1);console.log("row: ",l),console.log("col: ",r);var o=this.loom.treadles[r],h=this.loom.harnesses[l];o.harnesses.has(h)?o.unattachHarness(h):o.attachHarness(h)}else"treadlingTable"===t&&this.loom.setTreadlingInstruction(n,r);var c=this.getUpdatedTableDataFromLoom(t),d=Object(p.a)({},a,c);this.setState(d),this.setState({weavingTableData:this.updateWeaveNew()})}},{key:"getUpdatedTableDataFromLoom",value:function(e){var t,a=this;return"threadingTable"===e?t=(t=this.arrayFiller(this.loom.dimensions.harnesses,this.loom.dimensions.warp,!1)).map((function(e,t){return e.map((function(e,n){return a.loom.harnesses[t].threads.has(a.loom.warpThreads[n])}))})):"tieupTable"===e?t=(t=this.arrayFiller(this.loom.dimensions.harnesses,this.loom.dimensions.treadles,!1)).map((function(e,t){return e.map((function(e,n){return a.loom.treadles[n].harnesses.has(a.loom.harnesses[a.loom.dimensions.harnesses-(t+1)])}))})):"treadlingTable"===e&&(t=(t=this.arrayFiller(this.loom.dimensions.weft,this.loom.dimensions.treadles,!1)).map((function(e,t){var n=new Array(a.loom.dimensions.treadles).fill(!1);return null===a.loom.treadlingInstructions[t]||(n[a.loom.treadlingInstructions[t].id]=!0),n}))),t}},{key:"updateWeaveNew",value:function(){for(var e=this.arrayFiller(this.state.weftCount,this.state.warpCount,{backgroundColor:"#000"}),t=0;t<e.length;t++)for(var a=0;a<e[0].length;a++){var n=this.loom.getTopThreadAt(a,t);e[t][a]=n.representation}return e}},{key:"render",value:function(){return Object(r.jsx)("table",{className:"draftingTable",children:Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{className:"threadingTableContainer",children:Object(r.jsx)(b,{name:"threadingTable",data:this.state.threadingTableData,handleToggle:this.handleToggle})}),Object(r.jsx)("td",{className:"tieupTableContainer",children:Object(r.jsx)(b,{name:"tieupTable",data:this.state.tieupTableData,handleToggle:this.handleToggle})})]}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{className:"weavingTableContainer",children:Object(r.jsx)(m,{name:"weavingTable",data:this.state.weavingTableData})}),Object(r.jsx)("td",{className:"treadlingTableContainer",children:Object(r.jsx)(b,{name:"treadlingTable",data:this.state.treadlingTableData,handleToggle:this.handleToggle})})]})]})})}},{key:"arrayDimensionsFromString",value:function(e){var t=Number.MAX_VALUE,a=Number.MIN_VALUE,n=e.split(","),r=0;return n.forEach((function(e){e.includes("-")?e.split("-").forEach((function(e){t=Math.min(t,parseInt(e)),a=Math.max(a,parseInt(e))})):(t=Math.min(t,parseInt(e)),a=Math.max(a,parseInt(e))),r+=1})),{rows:a-t+1,cols:r}}},{key:"expandPatternString",value:function(e){var t=e.replaceAll(/(\d+)x(\d+)/g,(function(e,t,a){return(t+",").repeat(a)}));return(t=t.replaceAll(/,,/g,",")).endsWith(",")&&(t=t.substring(0,t.length-1)),t}},{key:"loomInstanceFromPatternData",value:function(e){for(var t=this.expandPatternString(e.threading),a=t.split(","),n=this.arrayDimensionsFromString(t),r=this.expandPatternString(e.treadling),i=r.split(","),s=this.arrayDimensionsFromString(r),l=this.expandPatternString(e.tieup),o=l.split(","),h=this.arrayDimensionsFromString(l),c=new O({warp:n.cols,weft:s.cols,treadles:h.cols,harnesses:h.rows}),d=0;d<n.cols;d++){var u=parseInt(a[n.cols-1-d])-1,x=n.rows-1-u;c.harnesses[x].attachThread(c.warpThreads[d])}for(var p=0;p<s.cols;p++){var g=parseInt(i[p])-1;c.treadlingInstructions[p]=c.treadles[g]}for(var b=function(e){o[e].split("-").forEach((function(t){var a=parseInt(t)-1;c.treadles[e].attachHarness(c.harnesses[a])}))},f=0;f<h.cols;f++)b(f);return c}},{key:"componentDidUpdate",value:function(e){var t=this;if(null!==this.props.patternData&&e.patternData!==this.props.patternData){this.loom=this.loomInstanceFromPatternData(this.props.patternData.data);var a={weftCount:this.loom.dimensions.weft,warpCount:this.loom.dimensions.warp,harnessCount:this.loom.dimensions.harnesses,treadleCount:this.loom.dimensions.treadles,threadingTableData:this.getUpdatedTableDataFromLoom("threadingTable"),tieupTableData:this.getUpdatedTableDataFromLoom("tieupTable"),treadlingTableData:this.getUpdatedTableDataFromLoom("treadlingTable")};this.setState(a,(function(){t.setState({weavingTableData:t.updateWeaveNew()})}))}}}]),a}(s.a.Component)),y=[{name:"Basic Twill",data:{threading:"1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4",tieup:"1-4,1-2,2-3,3-4",treadling:"1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4"}},{name:"Periwinkle",data:{threading:"3,2,1,4,3,2,1,4,3,4,3,2,3,2,1,4,3,4,1,2,3,2,3,4,3,4,1,2",tieup:"1-4,1-2,2-3,3-4",treadling:"3,2,1,4x3,3x3,2,1,4x2,1,2,3x3,4x3,1,2,3"}},{name:"Diadem",data:{threading:"4,1,2,3,4,1,2,3,4,1,2,3,2,3,2,1,4,3,4,3,4,1,2,3,2,3,2,1,4,3,2,1,4,3,2,1,4,1",tieup:"1-4,1-2,2-3,3-4",treadling:"3x2,4,1,2,3,4,1,2,3,4,1x4,4,3,2x4,3,4,1x4,4,3,2,1,4,3,2,1,4,3x2"}},{name:"Rings and Chains",data:{threading:"1,2,3,4,1,2,3,4,1,2,3,4,1,4,1,4,3,4,3,2,3,2,1,2,1,4,1,2,1,4,1,2,1,4,1,2,1,4,1,2,1,4,1,2,1,4,1,2,1,2,3,2,3,4,3,4,1,4,1,4,3,2,1,4,1,2,3,4",tieup:"1-4,1-2,2-3,3-4",treadling:"1,2,3,4,1x4,4x3,3x3,2x3,1x2,2x2,1x2,2x2,1x2,2x2,1x2,2x2,1x2,2x2,1x2,2x3,3x3,4x3,1x4,4,3,2,1"}},{name:"Wheel of Fortune",data:{threading:"1,2,3,4,1,2,1,2,3,2,3,4,3,4,1,4,3,4,1,4,3,4,3,2,3,2,1,2,1,4,3,2,1,4,3,2,1,4,3,2,3,2,1,2,1,4,1,4,3,4,1,4,3,4,1,4,1,2,1,2,3,2,3,4,1,2,3,4",tieup:"1-4,1-2,2-3,3-4",treadling:"2,3,4,1,2x3,3x3,4x3,1x2,4x2,1x2,4x3,3x3,2x3,1,4,3,2,1,4,3,2,1,4,3x3,2x3,1x3,4x2,1x2,4x2,1x3,2x3,3x3,4,1,2,3,4,1"}},{name:"Chariot Wheel No. 3",data:{threading:"4,3,2,1,4,3,2,3,4,3,2,3,4,1,4,1,4,1,2,1,2,1,4,1,2,1,4,1,2,1,2,1,4,1,4,1,4,3,2,3,4,3,2,3,4,1,2,3",tieup:"1-4,1-2,2-3,3-4",treadling:"4,3,2,1,4,3x2,4x2,3x2,4,1x5,2x4,1x2,2x2,1x2,2x4,1x5,4,3x2,4x2,3x2,4,1,2,3,4"}},{name:"Chariot Wheel No. 3 Alt",data:{threading:"4,3,2,1,4,3,2,3,4,3,2,3,4,1,4,1,4,1,2,1,2,1,4,1,2,1,4,1,2,1,2,1,4,1,4,1,4,3,2,3,4,3,2,3,4,1,2,3",tieup:"1-4,1-2,2-3,3-4",treadling:"3,4,1,2,3,4x2,3x2,4x2,3,2x5,1x4,2x2,1x2,2x2,1x4,2x5,3,4x2,3x2,4x2,3,2,1,4,3"}},{name:"Church Windows",data:{threading:"3,2,1,4,3,4,3,4,1,4,1,2,1,4,1,4,3,4,3,4,1,2,3,2,1,2,3,2,1,2,3,2,1,2,3,2,1,2,3,2,1,2,3,2,1,4,3,4,3,4,1,4,1,2,1,4,1,4,3,4,3,4,2,1",tieup:"1-4,1-2,2-3,3-4",treadling:"3,2,1,4x4,1x3,2x2,1x3,4x4,1,2,3x2,2x2,3x2,2x2,3x2,2x2,3x2,2x2,3x2,2x2,3x2,2,1,4x4,1x3,2x2,1x3,4x4,1,2,3"}},{name:"Cambridge Beauty",data:{threading:"2,3,4,1,4,1,4,1,4,3,4,3,4,3,2,3,2,3,2,1,2,1,2,1,2,3,4,3,2,1,2,3,4,3,2,1,2,3,4,3,2,1,2,3,4,3,2,1,2,1,2,1,2,3,2,3,2,3,4,3,4,3,4,1,4,1,4,1,4,3",tieup:"1-4,1-2,2-3,3-4",treadling:"3,4,1x6,4x5,3x5,2x6,3,4x2,3,2x2,3,4x2,3,2x2,3,4x2,3,2x2,3,4x2,3,2x2,3,4x2,3,2x6,3x5,4x5,1x6,4,3"}},{name:"Star of Bethlehem",data:{threading:"2,3,4,1,2,3,4,1,2,3,4,1,2,1,2,3,2,3,4,3,4,1,4,1,2,3,4,1,4,3,2,1,4,1,4,3,4,3,2,3,2,1,2,1,4,3,2,1",tieup:"1-4,1-2,2-3,3-4",treadling:"2,3,4,1,2,3,4,1,2,3,4,1,2x3,3x3,4x3,1x3,1,2,3,4,1x2,4,3,2,1x3,4x3,3x3,2x3,1,4,3,2"}},{name:"Maltese Cross",data:{threading:"1,2,3,4,1,2,3,4,1,2,3,4,1,2,1,4,1,4,3,4,3,2,3,2,1,2,1,4,1,2,1,4,1,2,1,2,3,2,3,4,3,4,1,4,1,2,1,4,3,2",tieup:"1-4,1-2,2-3,3-4",treadling:"2,1,4,3,2,1,4,3,2x2,3x3,4x3,1x3,2x3,3x2,2x2,3x2,2x3,1x3,4x3,3x3,2x2,3,4,1,2"}}],C=(a(19),function(e){Object(u.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(){this.props.handleChange(this.props.index)}},{key:"render",value:function(){return Object(r.jsx)("li",{class:"patternItem",onClick:this.handleClick,children:this.props.data.name})}}]),a}(s.a.Component)),k=(a(20),function(e){Object(u.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){this.props.handleChange(e)}},{key:"render",value:function(){var e=this;return Object(r.jsx)("ul",{class:"patternList",children:y.map((function(t,a){return Object(r.jsx)(C,{handleChange:e.handleChange,index:a,data:t})}))})}}]),a}(s.a.Component)),D=(a(21),function(e){Object(u.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={currentPattern:null},n.handlePatternChange=n.handlePatternChange.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"handlePatternChange",value:function(e){this.setState({currentPattern:y[e]})}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(k,{handleChange:this.handlePatternChange}),Object(r.jsx)(w,{patternData:this.state.currentPattern})]})}}]),a}(s.a.Component)),F=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,23)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),i(e),s(e)}))};o.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(D,{})}),document.getElementById("root")),F()}],[[22,1,2]]]);
//# sourceMappingURL=main.54ea70dc.chunk.js.map